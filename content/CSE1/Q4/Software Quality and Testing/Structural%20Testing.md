+++
title = "Structural Testing"
date = 2019-09-29
+++
<h1 id="structural-testing">Structural Testing</h1><h2 id="code-coverage">Code coverage</h2><ul><li><strong>Equivalence partition coverage: </strong>percentage of equivalence partitions exercised</li><li><strong>Boundary value analysis coverage: </strong>percentage of boundaries exercised</li><li><strong>Decision table coverage: </strong>percentage of business rules or decision table columns tested</li><li><strong>State transition coverage: </strong></li><li class="ql-indent-1">Percentage of states visited</li><li class="ql-indent-1">Percentage of transitions exercised</li><li class="ql-indent-1">Percentage of pairs of valid transitions exercised</li><li class="ql-indent-1">Percentage of invalid transitions exercised</li></ul><p><br></p><h3 id="source-code">Source code</h3><p>The higher, the more levels it subsumes (indents are subtrees, see appendix A for the actual tree)</p><ul><li><strong>Path coverage: </strong>covers every possible path in the entire code</li><li><strong>MCDC: </strong>if you have many if statements, the amount of possible paths can be <span class="ql-formula" data-value="2^n">﻿<span contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.664392em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span></span>﻿</span> where <span class="ql-formula" data-value="n">﻿<span contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">n</span></span></span></span></span>﻿</span> is the amount of branches, we should identify the useful cases to test. <span style="background-color: rgba(0, 0, 0, 0);">See </span><a href="https://cshub.nl/post/498641362" target="_blank" style="background-color: rgba(0, 0, 0, 0);">this post</a><span style="background-color: rgba(0, 0, 0, 0);"> for more e</span>xplanation on MCDC</li><li><strong>Branch + condition coverage: </strong>a combination of branch and condition coverage, thus cover ever condition and every branch </li><li class="ql-indent-1"><strong>Branch coverage: </strong>using a control flow graph you see all the possible options the program can take. Branch coverage is calculated by the amount of these paths that has been taken during testing. This doesn't imply that each expression in an if statement has been both true and false in the tests (that is condition coverage)</li><li class="ql-indent-2"><strong>Statement coverage: </strong>line coverage might not be the best metric. The same code can be written in multiple amount of lines, which changes the output of our coverage. Counting statements is therefore better.</li><li class="ql-indent-2"><strong>Line coverage</strong>: if our test suite exercises all the lines, we are happy.</li><li class="ql-indent-1"><strong>Condition coverage: </strong>a decision block (<em>if </em>for example) can have multiple inputs which can be divided into multiple conditions. Using condition coverage we should check all possible combinations of conditions. But, this doesn't necessarily cover all branches.</li></ul><p><br></p><p><em>Example</em></p><p>Take the following code:</p><div style="white-space: normal;" class="markdown-body"><pre data-lang="text/x-java"><code>if (a == 1 || b == 2) {
	// Do something
} else {
	// Do something else
}
</code></pre>
</div><p>We test this with 2 cases: </p><ul><li><span class="ql-formula" data-value="a=1,\ b=3">﻿<span contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mtext>&nbsp;</mtext><mi>b</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">a=1,\ b=3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height: 0.8888799999999999em; vertical-align: -0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.16666666666666666em;"></span><span class="mspace">&nbsp;</span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">3</span></span></span></span></span>﻿</span> </li><li><span class="ql-formula" data-value="a=0,\ b=2">﻿<span contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mtext>&nbsp;</mtext><mi>b</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">a=0,\ b=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height: 0.8888799999999999em; vertical-align: -0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.16666666666666666em;"></span><span class="mspace">&nbsp;</span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">2</span></span></span></span></span>﻿</span> </li></ul><p>This we cover all true/false combinations (100% condition coverage), but we never get to the else statement, so no 100% branch coverage.</p><p><br></p><p>Now we test with the following:</p><ul><li><span class="ql-formula" data-value="a=1,\ b=0">﻿<span contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mtext>&nbsp;</mtext><mi>b</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">a=1,\ b=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height: 0.8888799999999999em; vertical-align: -0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.16666666666666666em;"></span><span class="mspace">&nbsp;</span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>﻿</span> </li><li><span class="ql-formula" data-value="a=2,\ b=0">﻿<span contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>=</mo><mn>2</mn><mo separator="true">,</mo><mtext>&nbsp;</mtext><mi>b</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">a=2,\ b=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height: 0.8888799999999999em; vertical-align: -0.19444em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.16666666666666666em;"></span><span class="mspace">&nbsp;</span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>﻿</span> </li></ul><p>Here we test both branches (100% branch coverage), but the expression with <span class="ql-formula" data-value="b">﻿<span contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault">b</span></span></span></span></span>﻿</span> has never been true, so no 100% condition coverage.</p><p><br></p><h2 id="code-tests">Code tests</h2><ul><li><strong>Loop boundary Adequacy: </strong>a test suite satisfies this criterion iff for every loop:</li><li class="ql-indent-1">A test case exercises the loop zero times</li><li class="ql-indent-1">A test case exercises the loop once</li><li class="ql-indent-1">A test case exercises the loop multiple times</li><li><strong>McCabe's Cyclomatic Complexity: </strong></li><li class="ql-indent-1"><span class="ql-formula" data-value="C=\left|E\right|-\left|N\right|+2">﻿<span contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mo>=</mo><mrow><mo fence="true">∣</mo><mi>E</mi><mo fence="true">∣</mo></mrow><mo>−</mo><mrow><mo fence="true">∣</mo><mi>N</mi><mo fence="true">∣</mo></mrow><mo>+</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">C=\left|E\right|-\left|N\right|+2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.07153em;" class="mord mathdefault">C</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">∣</span><span style="margin-right: 0.05764em;" class="mord mathdefault">E</span><span class="mclose delimcenter" style="top: 0em;">∣</span></span><span class="mspace" style="margin-right: 0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">∣</span><span style="margin-right: 0.10903em;" class="mord mathdefault">N</span><span class="mclose delimcenter" style="top: 0em;">∣</span></span><span class="mspace" style="margin-right: 0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">2</span></span></span></span></span>﻿</span>, where <span class="ql-formula" data-value="E">﻿<span contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.05764em;" class="mord mathdefault">E</span></span></span></span></span>﻿</span> is the number of edges of the graph, <span class="ql-formula" data-value="N">﻿<span contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.10903em;" class="mord mathdefault">N</span></span></span></span></span>﻿</span> is the number of nodes on the graph and <span class="ql-formula" data-value="C">﻿<span contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.07153em;" class="mord mathdefault">C</span></span></span></span></span>﻿</span> is the number of tests to be written</li><li class="ql-indent-1"><span class="ql-formula" data-value="C=\text{number of decision points}+1">﻿<span contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mo>=</mo><mtext>number&nbsp;of&nbsp;decision&nbsp;points</mtext><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">C=\text{number of decision points}+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span style="margin-right: 0.07153em;" class="mord mathdefault">C</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height: 0.8888799999999999em; vertical-align: -0.19444em;"></span><span class="mord text"><span class="mord">number&nbsp;of&nbsp;decision&nbsp;points</span></span><span class="mspace" style="margin-right: 0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span></span></span></span></span>﻿</span> </li><li class="ql-indent-1">If <span class="ql-formula" data-value="C>10">﻿<span contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mo>&amp;gt;</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">C&amp;gt;10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 0.72243em; vertical-align: -0.0391em;"></span><span style="margin-right: 0.07153em;" class="mord mathdefault">C</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">0</span></span></span></span></span>﻿</span>, the method is too complex </li></ul><h1 id=""><br></h1><h1 id="appendix">Appendix</h1><h2 id="a">A</h2><p><img src="https://i.imgur.com/17bA6ce.png" width="392"></p><p><em>Image taken from slides by Mauricio Aniche</em></p><h2 id=""><br></h2>